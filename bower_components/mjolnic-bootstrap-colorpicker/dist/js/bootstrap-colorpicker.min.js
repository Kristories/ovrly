!function(a){"use strict";var b={translateFormats:{rgb:function(){var a=this.color.toRGB();return"rgb("+a.r+","+a.g+","+a.b+")"},rgba:function(){var a=this.color.toRGB();return"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"},hsl:function(){var a=this.color.toHSL();return"hsl("+Math.round(360*a.h)+","+Math.round(100*a.s)+"%,"+Math.round(100*a.l)+"%)"},hsla:function(){var a=this.color.toHSL();return"hsla("+Math.round(360*a.h)+","+Math.round(100*a.s)+"%,"+Math.round(100*a.l)+"%,"+a.a+")"},hex:function(){return this.color.toHex()}},slidersHorizontal:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:e||1,s:f,b:g,a:d||1}},HueToRGB:function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,c,d,e){0>c&&(c=0);var f;f=.5>=d?d*(1+c):d+c-d*c;var g=2*d-f,h=a+1/3,i=a,j=a-1/3,k=Math.round(255*b.HueToRGB(g,f,h)),l=Math.round(255*b.HueToRGB(g,f,i)),m=Math.round(255*b.HueToRGB(g,f,j));return[k,l,m,e||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},c=function(a){this.value={h:0,s:0,b:0,a:1},this.setColor(a)};c.prototype={constructor:c,setColor:function(c){c=c.toLowerCase();var d=this;a.each(b.stringParsers,function(a,e){var f=e.re.exec(c),g=f&&e.parse(f),h=e.space||"rgba";return g?(d.value="hsla"===h?b.RGBtoHSB.apply(null,b.HSLtoRGB.apply(null,g)):b.RGBtoHSB.apply(null,g),!1):!0})},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setLightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a=a||this.value.h,b=b||this.value.s,c=c||this.value.b,d=d||this.value.a;var e,f,g,h,i,j,k,l;switch(a&&void 0===b&&void 0===c&&(b=a.s,c=a.v,a=a.h),h=Math.floor(6*a),i=6*a-h,j=c*(1-b),k=c*(1-i*b),l=c*(1-(1-i)*b),h%6){case 0:e=c,f=l,g=j;break;case 1:e=k,f=c,g=j;break;case 2:e=j,f=c,g=l;break;case 3:e=j,f=k,g=c;break;case 4:e=l,f=j,g=c;break;case 5:e=c,f=j,g=k}return{r:Math.floor(255*e),g:Math.floor(255*f),b:Math.floor(255*g),a:d}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return"#"+(1<<24|parseInt(e.r)<<16|parseInt(e.g)<<8|parseInt(e.b)).toString(16).substr(1)},toHSL:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b);var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&1>=f?f:2-f,f/=2,g>1&&(g=1),{h:e,s:g,l:f,a:d||this.value.a}}};var d=0,e=function(c,e){d++,this.element=a(c).attr("data-colorpicker-guid",d);var f=e.format||this.element.data("color-format")||"hex";this.format=b.translateFormats[f],this.isInput=this.element.is("input"),this.component=this.element.is(".colorpicker-component")?this.element.find(".add-on, .input-group-addon"):!1,this.container=e.container||!1,this.disabled=!1;var g=e.disabled||this.element.data("disabled");g&&(this.disabled=!0,this.isInput?this.element.attr("disabled","disabled"):this.element.find("input").attr("disabled","disabled")),this.picker=a(b.template).attr("data-colorpicker-guid",d),this.container?(this.picker.appendTo(this.container),this.picker.addClass("colorpicker-inline")):this.picker.appendTo(a("body")),this.picker.on("mousedown.colorpicker",a.proxy(this.mousedown,this)),this.isHorizontal=e.horizontal,this.isHorizontal&&this.picker.addClass("colorpicker-horizontal"),this.isInput?(this.element.on({"focus.colorpicker":a.proxy(this.show,this),"keyup.colorpicker":a.proxy(this.update,this)}),this.element.hasClass("colorpicker-inline")||this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})):this.component?(this.element.on({"keyup.colorpicker":a.proxy(this.updateComponent,this)}),this.component.on({"click.colorpicker":a.proxy(this.show,this)})):this.element.on({"click.colorpicker":a.proxy(this.show,this)}),("rgba"===f||"hsla"===f)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update(),a(a.proxy(function(){this.element.trigger("create",[this])},this))};e.prototype={constructor:e,show:function(b){this.disabled||(this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize.colorpicker",a.proxy(this.place,this)),this.isInput||b&&(b.stopPropagation(),b.preventDefault()),a(document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},updateComponent:function(){var b=a(this.element).children("input").val();b&&(this.element.data("color",b),this.update())},update:function(){var a=this.isInput?this.element.prop("value"):this.element.data("color");("undefined"==typeof a||null===a)&&(a="#000000"),this.color=new c(a),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.component&&this.component.find("i").css("background-color",this.format()),this.previewColor()},hide:function(){this.picker.hide(),a(window).off("resize",this.place),a(document).off({mousedown:this.hide}),this.isInput?""!==this.element.val()&&this.element.prop("value",this.format.call(this)).trigger("change"):(this.component&&""!==this.element.find("input").val()&&this.element.find("input").prop("value",this.format.call(this)).trigger("change"),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hidePicker",color:this.color})},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},disable:function(){this.disabled=!0,this.isInput?this.element.attr("disabled","disabled").trigger("disable"):this.element.find("input").attr("disabled","disabled").trigger("disable")},enable:function(){this.disabled=!1,this.isInput?this.element.removeAttr("disabled").trigger("enable"):this.element.find("input").removeAttr("disabled").trigger("enable")},destroy:function(){a(".colorpicker[data-colorpicker-guid="+this.element.attr("data-colorpicker-guid")+"]").remove(),this.element.removeData("colorpicker").removeAttr("data-colorpicker-guid").off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger("destroy",[this])},setValue:function(a){this.isInput?this.element.prop("value",a):(this.element.find("input").val(a),this.element.data("color",a)),this.update(),this.element.trigger({type:"changeColor",color:this.color})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(a){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target),e=d.closest("div");if(!e.is(".colorpicker")){var f=this.isHorizontal?b.slidersHorizontal:b.sliders;if(e.is(".colorpicker-saturation"))this.slider=a.extend({},f.saturation);else if(e.is(".colorpicker-hue"))this.slider=a.extend({},f.hue);else{if(!e.is(".colorpicker-alpha"))return!1;this.slider=a.extend({},f.alpha)}var g=e.offset();this.slider.knob=e.find("i")[0].style,this.slider.left=c.pageX-g.left,this.slider.top=c.pageY-g.top,this.pointer={left:c.pageX,top:c.pageY},a(document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((a.pageX||this.pointer.left)-this.pointer.left))),c=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((a.pageY||this.pointer.top)-this.pointer.top)));if(this.slider.knob.left=b+"px",this.slider.knob.top=c+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,b/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,c/100),this.previewColor(),this.isInput)try{this.element.val(this.format.call(this)).trigger("change")}catch(a){this.element.val(this.color.toHex()).trigger("change")}else try{this.element.find("input").val(this.format.call(this)).trigger("change")}catch(a){this.element.find("input").val(this.color.toHex()).trigger("change")}return this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},a.fn.colorpicker=function(b,c){return this.each(function(){var d=a(this),f=d.data("colorpicker"),g="object"==typeof b&&b;f?"string"==typeof b&&f[b](c):"destroy"!==b&&d.addClass("colorpicker-element").data("colorpicker",f=new e(this,a.extend({},a.fn.colorpicker.defaults,g)))})},a.fn.colorpicker.defaults={},a.fn.colorpicker.Constructor=e}(window.jQuery);